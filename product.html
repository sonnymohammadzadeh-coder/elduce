<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>El DUCE â€” Product</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white font-sans min-h-screen">

  <nav class="flex items-center justify-between px-8 py-6 border-b border-white/10">
    <a href="index.html" class="text-2xl font-bold tracking-widest">EL DUCE</a>
    <a href="checkout.html" class="opacity-80 hover:opacity-100">Checkout</a>
  </nav>

  <main class="px-8 py-10 grid md:grid-cols-2 gap-10">
    <!-- Gallery -->
    <div>
      <img id="mainImg" class="w-full h-[420px] object-contain bg-white/5 rounded-2xl" alt="" />
      <div id="thumbs" class="grid grid-cols-3 gap-3 mt-4"></div>
    </div>

    <!-- Info -->
    <div>
      <h1 id="title" class="text-4xl font-extrabold mb-3"></h1>
      <p id="price" class="text-white/70 mb-6"></p>

      <div class="mb-6">
        <p class="font-semibold mb-2">Colour</p>
        <div id="colors" class="flex gap-2 flex-wrap"></div>
      </div>

      <button id="addBtn" class="bg-white text-black px-6 py-3 rounded-2xl font-semibold">
        Add to Cart
      </button>

      <p class="text-white/60 mt-6">
        Tip: Add your angle images in <span class="font-mono">images/products/&lt;slug&gt;/&lt;color&gt;/1.webp</span> etc.
      </p>
    </div>
  </main>

  <script>
    // Edit/add products here (slugs must match your folders)
    const PRODUCTS = {
      "essential-tee": { name: "El DUCE Essential Tee", price: 45, colors: ["black", "white"], angles: [1,2,3] },
      "street-pants": { name: "El DUCE Street Pants", price: 110, colors: ["black"], angles: [1,2,3] },
      "signature-hoodie": { name: "El DUCE Signature Hoodie", price: 90, colors: ["black"], angles: [1,2,3] },
      "beanie": { name: "El DUCE Beanie", price: 30, colors: ["black"], angles: [1,2,3] },
      "belt": { name: "El DUCE Belt", price: 55, colors: ["black"], angles: [1,2,3] },
      "puffer-vest": { name: "El DUCE Puffer Vest", price: 140, colors: ["black"], angles: [1,2,3] },
    };

    const params = new URLSearchParams(location.search);
    const slug = params.get("id");
    const product = PRODUCTS[slug];

    if (!product) {
      document.body.innerHTML = `<div class="p-10">Product not found. <a class="underline" href="index.html">Back</a></div>`;
      throw new Error("Missing product");
    }

    let currentColor = product.colors[0];

    const titleEl = document.getElementById("title");
    const priceEl = document.getElementById("price");
    const mainImg = document.getElementById("mainImg");
    const thumbs = document.getElementById("thumbs");
    const colors = document.getElementById("colors");
    const addBtn = document.getElementById("addBtn");

    titleEl.textContent = product.name;
    priceEl.textContent = `$${product.price} CAD`;

    function imgPath(angle) {
      return `images/products/${slug}/${currentColor}/${angle}.webp`;
    }

    function renderThumbs() {
      thumbs.innerHTML = "";
      product.angles.forEach((a) => {
        const b = document.createElement("button");
        b.className = "bg-white/5 rounded-xl overflow-hidden border border-white/10 hover:border-white/30";
        b.innerHTML = `<img src="${imgPath(a)}" class="w-full h-24 object-contain" alt="">`;
        b.onclick = () => (mainImg.src = imgPath(a));
        thumbs.appendChild(b);
      });
      mainImg.src = imgPath(product.angles[0]);
      mainImg.alt = `${product.name} - ${currentColor}`;
    }

    function renderColors() {
      colors.innerHTML = "";
      product.colors.forEach((c) => {
        const btn = document.createElement("button");
        btn.className = `px-4 py-2 rounded-xl border ${c === currentColor ? "border-white" : "border-white/20"} bg-white/5`;
        btn.textContent = c.toUpperCase();
        btn.onclick = () => {
          currentColor = c;
          renderColors();
          renderThumbs();
        };
        colors.appendChild(btn);
      });
    }

    addBtn.onclick = () => {
      const cart = JSON.parse(localStorage.getItem("cart") || "[]");
      cart.push({ slug, name: product.name, price: product.price, color: currentColor, qty: 1 });
      localStorage.setItem("cart", JSON.stringify(cart));
      alert("Added to cart!");
    };

    renderColors();
    renderThumbs();
  </script>
</body>
</html>
